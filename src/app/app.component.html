<mat-toolbar>
    <div class="fourthwave"><h1>4th~Wave</h1></div>
    <span class="spacer"></span>

    <ng-container *ngIf="!(auth.user | async); else userSettingsTemplate">
        <button
            style="color: var(--background-medium-gray); background-color: var(--accent-light)"
            mat-button
            color="accent"
            (click)="signIn()"
        >
            sign In
        </button>
    </ng-container>
    <ng-template #userSettingsTemplate>
        <button mat-mini-fab aria-label="User Icon" [matMenuTriggerFor]="menu" aria-label="User menu options">
            <mat-icon>account_circle</mat-icon>
        </button>

        <mat-menu #menu="matMenu">
            <button (click)="navigate('me')" mat-menu-item>
                <mat-icon>settings</mat-icon>

                <span>Settings</span>
            </button>
            <button (click)="signOut()" mat-menu-item>
                <mat-icon>exit_to_app</mat-icon>
                <span>Sign Out</span>
            </button>
        </mat-menu>
    </ng-template>
</mat-toolbar>
<mat-drawer-container [ngStyle]="{ height: player.active && !(mini$ | async) ? '84vh' : '93vh' }">
    <mat-drawer #drawer mode="side" opened [ngClass]="{ collapsed: localStorage.preferences.collapsed }">
        <span class="icons">
            <div class="menu__item">
                <button mat-button (click)="navigate('')">
                    <mat-icon>home</mat-icon>
                    {{ !localStorage.preferences.collapsed ? 'Home' : '' }}
                </button>
            </div>
            <div class="menu__item">
                <button mat-button (click)="navigate('search')">
                    <mat-icon>search</mat-icon>
                    {{ !localStorage.preferences.collapsed ? 'Search' : '' }}
                </button>
            </div>

            <div class="menu__item">
                <button mat-button (click)="navigate('discover')">
                    <mat-icon>explore</mat-icon>
                    {{ !localStorage.preferences.collapsed ? 'Discover' : '' }}
                </button>
            </div>

            <div class="menu__item">
                <button mat-button (click)="navigate('playlist')">
                    <mat-icon>playlist_play</mat-icon>
                    {{ !localStorage.preferences.collapsed ? 'Playlists' : '' }}
                </button>
            </div>

            <div class="menu__item">
                <button mat-button (click)="navigate('library')">
                    <mat-icon>library_music</mat-icon>
                    {{ !localStorage.preferences.collapsed ? 'Library' : '' }}
                </button>
            </div>
        </span>

        <div class="menu__item collapse_button">
            <button mat-button (click)="localStorage.toggleCollapse()">
                <mat-icon>{{ localStorage.preferences.collapsed ? 'arrow_forward' : 'keyboard_backspace' }}</mat-icon>
                {{ !localStorage.preferences.collapsed ? 'Collapse' : '' }}
            </button>
        </div>
    </mat-drawer>
    <mat-drawer-content [ngClass]="{ collapsed: localStorage.preferences.collapsed }">
        <router-outlet></router-outlet>
    </mat-drawer-content>
</mat-drawer-container>
<app-player></app-player>
